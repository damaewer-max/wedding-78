<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>–°–≤–∞–¥—å–±–∞ –ê–ª–µ–∫—Å–∞–Ω–¥—Ä–∞ –∏ –ê–Ω–∞—Å—Ç–∞—Å–∏–∏</title>

<style>
body{
  margin:0;
  font-family: system-ui, -apple-system, sans-serif;
  color:#2b2b2b;
  text-align:center;
  overflow-x:hidden;

  background:
    linear-gradient(rgba(255,255,255,.75), rgba(255,255,255,.9)),
    url("photo.jpg") center/cover fixed no-repeat;
}

canvas{
  position:fixed;
  top:0;
  left:0;
  pointer-events:none;
}

.start{
  height:100vh;
  display:flex;
  justify-content:center;
  align-items:center;
  flex-direction:column;
}

.card{
  max-width:760px;
  margin:40px auto;
  padding:35px 25px 50px;
  background:#ffffffee;
  backdrop-filter:blur(6px);
  border-radius:22px;
  box-shadow:0 10px 40px rgba(0,0,0,.12);
}

h1{font-size:36px;margin:10px 0}
h2{margin-top:30px;color:#4d7fb3}

.timer{
  font-size:22px;
  font-weight:600;
  margin:18px 0;
}

.message{
  text-align:left;
  line-height:1.6;
}

input, select{
  width:95%;
  padding:14px;
  margin:8px 0;
  border-radius:12px;
  border:1px solid #ddd;
  font-size:16px;
}

.buttons{
  display:flex;
  justify-content:center;
  gap:12px;
  margin-top:12px;
}

button{
  padding:14px 26px;
  border:none;
  border-radius:14px;
  font-size:16px;
  cursor:pointer;
}

.yes{background:#a8d8ff}
.no{background:#f2c4c4}
.download{margin-top:18px;background:#e3e3e3}
.musicBtn{margin-top:12px;background:#dfefff}

.hidden{display:none}
</style>
</head>

<body>

<canvas id="petals"></canvas>

<div id="start" class="start">
  <h1>–ê–ª–µ–∫—Å–∞–Ω–¥—Ä & –ê–Ω–∞—Å—Ç–∞—Å–∏—è</h1>
  <button onclick="openInvite()">–û—Ç–∫—Ä—ã—Ç—å –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ</button>
</div>

<div id="invite" class="hidden">
  <div class="card">

    <h1>23 –º–∞—è 2026 üíç</h1>
    <div id="timer" class="timer"></div>

    <h2>–†–æ—Å–ø–∏—Å—å</h2>
    <p>
      –ó–ê–ì–° ‚Äî 15:40<br>
      –£–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç—Å–∫–∏–π –ø–µ—Ä., 48/2–ê, –†–æ—Å—Ç–æ–≤-–Ω–∞-–î–æ–Ω—É
    </p>

    <h2>–û–±—Ä–∞—â–µ–Ω–∏–µ</h2>
    <div class="message">
      <p>–ú—ã —Å—á–∞—Å—Ç–ª–∏–≤—ã –ø–æ–¥–µ–ª–∏—Ç—å—Å—è —Å –≤–∞–º–∏ —Å–∞–º—ã–º –≤–∞–∂–Ω—ã–º –∏ —Ç—ë–ø–ª—ã–º —Å–æ–±—ã—Ç–∏–µ–º –≤ –Ω–∞—à–µ–π –∂–∏–∑–Ω–∏ ‚Äî –¥–Ω—ë–º, –∫–æ–≥–¥–∞ –º—ã —Å—Ç–∞–Ω–µ–º —Å–µ–º—å—ë–π.</p>
      <p>–ü—Ä–∏–≥–ª–∞—à–∞–µ–º –≤–∞—Å –ø—Ä–æ–≤–µ—Å—Ç–∏ —ç—Ç–æ—Ç –¥–µ–Ω—å –≤–º–µ—Å—Ç–µ —Å –Ω–∞–º–∏. –í–∞—à–µ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤–∏–µ ‚Äî —Å–∞–º—ã–π —Ü–µ–Ω–Ω—ã–π –ø–æ–¥–∞—Ä–æ–∫ –¥–ª—è –Ω–∞—Å.</p>
      <p>–ë—É–¥–µ–º —Ä–∞–¥—ã –ª—é–±–æ–º—É –ø–æ–¥–∞—Ä–∫—É. –ò –Ω–µ –≤–∞–∂–Ω–æ, –≤ –∫–∞–∫–æ–π –∫–æ–Ω–≤–µ—Ä—Ç –≤—ã –µ–≥–æ —É–ø–∞–∫—É–µ—Ç–µ.</p>
      <p>–ü—Ä–æ—Å–∏–º –≤–æ–∑–¥–µ—Ä–∂–∞—Ç—å—Å—è –æ—Ç –∫—Ä–∏–∫–æ–≤ ¬´–ì–æ—Ä—å–∫–æ¬ª ‚Äî –ø–æ—Ü–µ–ª—É–π –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –ø–æ –≤–µ–ª–µ–Ω–∏—é —Å–µ—Ä–¥—Ü–∞.</p>
    </div>

    <h2>–î—Ä–µ—Å—Å-–∫–æ–¥</h2>
    <p>–ù–µ–∂–Ω–æ-–≥–æ–ª—É–±—ã–µ –∏ –±–µ–ª—ã–µ –æ—Ç—Ç–µ–Ω–∫–∏</p>

    <h2>–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤–∏–µ</h2>

    <input id="name" placeholder="–í–∞—à–µ –∏–º—è"/>
    <input id="count" type="number" value="1" min="1" placeholder="–°–∫–æ–ª—å–∫–æ —á–µ–ª–æ–≤–µ–∫"/>

    <h2>–¢—Ä–∞–Ω—Å—Ñ–µ—Ä</h2>
    <select id="transfer">
      <option>–ù–µ—Ç</option>
      <option>–¢–æ–ª—å–∫–æ –¥–æ —Ç–æ—Ä–∂–µ—Å—Ç–≤–∞</option>
      <option>–¢–æ–ª—å–∫–æ –ø–æ—Å–ª–µ —Ç–æ—Ä–∂–µ—Å—Ç–≤–∞</option>
      <option>–î–æ –∏ –ø–æ—Å–ª–µ —Ç–æ—Ä–∂–µ—Å—Ç–≤–∞</option>
    </select>

    <h2>–ü–∏—Ç–∞–Ω–∏–µ</h2>
    <select id="food">
      <option>–ù–µ—Ç –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–µ–π</option>
      <option>–ù–µ –µ–º –º—è—Å–æ</option>
      <option>–ù–µ –µ–º —Ä—ã–±—É</option>
      <option>–í–µ–≥–µ—Ç–∞—Ä–∏–∞–Ω–µ—Ü</option>
    </select>

    <h2>–ê–ª–∫–æ–≥–æ–ª—å</h2>
    <select id="alcohol">
      <option>–ö—Ä–∞—Å–Ω–æ–µ –≤–∏–Ω–æ</option>
      <option>–ë–µ–ª–æ–µ –≤–∏–Ω–æ</option>
      <option>–®–∞–º–ø–∞–Ω—Å–∫–æ–µ</option>
      <option>–í–∏—Å–∫–∏/–∫–æ–Ω—å—è–∫</option>
      <option>–í–æ–¥–∫–∞</option>
      <option>–ù–µ –±—É–¥—É –ø–∏—Ç—å –∞–ª–∫–æ–≥–æ–ª—å</option>
    </select>

    <h2>–†–µ–±—ë–Ω–æ–∫</h2>
    <select id="kids">
      <option>–ù–µ—Ç</option>
      <option>–î–∞</option>
    </select>

    <div class="buttons">
      <button class="yes" onclick="saveAnswer('–î–∞')">–ü—Ä–∏–¥—É</button>
      <button class="no" onclick="saveAnswer('–ù–µ—Ç')">–ù–µ —Å–º–æ–≥—É</button>
    </div>

    <button class="musicBtn" onclick="toggleMusic()">–ú—É–∑—ã–∫–∞ –≤–∫–ª/–≤—ã–∫–ª</button>
    <button class="download" onclick="downloadCSV()">–°–∫–∞—á–∞—Ç—å –æ—Ç–≤–µ—Ç—ã (Excel)</button>

  </div>
</div>

<audio id="music" loop>
  <source src="music.mp3" type="audio/mpeg">
</audio>

<script>
function openInvite(){
  start.classList.add("hidden");
  invite.classList.remove("hidden");
  music.play().catch(()=>{});
}

function toggleMusic(){
  if(music.paused) music.play();
  else music.pause();
}

/* —Ç–∞–π–º–µ—Ä */
const wedding = new Date("2026-05-23T15:00:00");
setInterval(()=>{
  const diff = wedding - new Date();
  const d = Math.floor(diff/86400000);
  const h = Math.floor(diff/3600000)%24;
  const m = Math.floor(diff/60000)%60;
  timer.textContent = `–î–æ —Å–≤–∞–¥—å–±—ã: ${d} –¥ ${h} —á ${m} –º–∏–Ω`;
},1000);

/* —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ */
function saveAnswer(answer){
  const list = JSON.parse(localStorage.getItem("wedding")) || [];

  list.push({
    name:name.value || "–ë–µ–∑ –∏–º–µ–Ω–∏",
    guests:count.value || 1,
    answer:answer,
    transfer:transfer.value,
    food:food.value,
    alcohol:alcohol.value,
    kids:kids.value,
    time:new Date().toLocaleString("ru-RU")
  });

  localStorage.setItem("wedding", JSON.stringify(list));
  alert("–°–ø–∞—Å–∏–±–æ –∑–∞ –æ—Ç–≤–µ—Ç ‚ù§Ô∏è");
}

/* Excel */
function downloadCSV(){
  const data = JSON.parse(localStorage.getItem("wedding")) || [];

  const rows = [[
    "–ò–º—è","–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –≥–æ—Å—Ç–µ–π","–û—Ç–≤–µ—Ç",
    "–¢—Ä–∞–Ω—Å—Ñ–µ—Ä","–ü–∏—Ç–∞–Ω–∏–µ","–ê–ª–∫–æ–≥–æ–ª—å","–†–µ–±—ë–Ω–æ–∫","–í—Ä–µ–º—è"
  ]];

  data.forEach(r=>{
    rows.push([
      r.name,r.guests,r.answer,
      r.transfer,r.food,r.alcohol,r.kids,r.time
    ]);
  });

  const csv = rows.map(r=>r.join(";")).join("\n");
  const BOM = "\uFEFF";

  const blob = new Blob([BOM + csv], {type:"text/csv;charset=utf-8;"});
  const a = document.createElement("a");
  a.href = URL.createObjectURL(blob);
  a.download = "answers.csv";
  a.click();
}

/* –ª–µ–ø–µ—Å—Ç–∫–∏ */
const canvas=document.getElementById("petals");
const ctx=canvas.getContext("2d");
canvas.width=innerWidth;
canvas.height=innerHeight;

let petals=[];
for(let i=0;i<40;i++){
  petals.push({x:Math.random()*innerWidth,y:Math.random()*innerHeight,s:Math.random()*1+0.5});
}

function draw(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  ctx.fillStyle="#ffdbe8";
  petals.forEach(p=>{
    ctx.beginPath();
    ctx.arc(p.x,p.y,5,0,6.28);
    ctx.fill();
    p.y+=p.s;
    if(p.y>innerHeight)p.y=0;
  });
  requestAnimationFrame(draw);
}
draw();
</script>

</body>
</html>
