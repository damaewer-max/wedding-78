<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>–°–≤–∞–¥—å–±–∞ –ê–ª–µ–∫—Å–∞–Ω–¥—Ä–∞ –∏ –ê–Ω–∞—Å—Ç–∞—Å–∏–∏</title>

<style>
body{
  margin:0;
  font-family: system-ui, -apple-system, sans-serif;
  color:#2b2b2b;
  text-align:center;
  overflow-x:hidden;

  background:
    linear-gradient(rgba(255,255,255,.75), rgba(255,255,255,.9)),
    url("photo.jpg") center/cover fixed no-repeat;
}

/* –ª–µ–ø–µ—Å—Ç–∫–∏ */
canvas{
  position:fixed;
  top:0;
  left:0;
  pointer-events:none;
}

/* —Å—Ç–∞—Ä—Ç */
.start{
  height:100vh;
  display:flex;
  justify-content:center;
  align-items:center;
  flex-direction:column;
}

.card{
  max-width:720px;
  margin:40px auto;
  padding:35px 25px 50px;
  background:#ffffffee;
  backdrop-filter:blur(6px);
  border-radius:22px;
  box-shadow:0 10px 40px rgba(0,0,0,.12);
}

h1{font-size:36px;margin:10px 0}
h2{margin-top:30px}

.timer{
  font-size:22px;
  font-weight:600;
  margin:18px 0;
  color:#4d7fb3;
}

/* –±–ª–æ–∫ —Å —Ç–µ–∫—Å—Ç–æ–º –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è */
.message{
  text-align:left;
  line-height:1.6;
  margin-top:20px;
  font-size:16px;
}

.message p{
  margin:12px 0;
}

/* —Ñ–æ—Ä–º–∞ */
input{
  width:90%;
  padding:14px;
  margin:8px 0;
  border-radius:12px;
  border:1px solid #ddd;
  font-size:16px;
}

.buttons{
  display:flex;
  justify-content:center;
  gap:12px;
  margin-top:12px;
}

button{
  padding:14px 26px;
  border:none;
  border-radius:14px;
  font-size:16px;
  cursor:pointer;
}

.yes{background:#a8d8ff}
.no{background:#f2c4c4}
.download{margin-top:18px;background:#e3e3e3}
.musicBtn{margin-top:12px;background:#dfefff}

.hidden{display:none}
</style>
</head>

<body>

<canvas id="petals"></canvas>

<div id="start" class="start">
  <h1>–ê–ª–µ–∫—Å–∞–Ω–¥—Ä & –ê–Ω–∞—Å—Ç–∞—Å–∏—è</h1>
  <p>–ø—Ä–∏–≥–ª–∞—à–∞—é—Ç –≤–∞—Å –Ω–∞ —Å–≤–∞–¥—å–±—É</p>
  <button onclick="openInvite()">–û—Ç–∫—Ä—ã—Ç—å –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ</button>
</div>

<div id="invite" class="hidden">
  <div class="card">

    <h1>23 –º–∞—è 2026 üíç</h1>
    <div id="timer" class="timer"></div>

    <h2>–û–±—Ä–∞—â–µ–Ω–∏–µ</h2>

    <div class="message">
      <p>
      –ú—ã —Å—á–∞—Å—Ç–ª–∏–≤—ã –ø–æ–¥–µ–ª–∏—Ç—å—Å—è —Å –≤–∞–º–∏ —Å–∞–º—ã–º –≤–∞–∂–Ω—ã–º –∏ —Ç—ë–ø–ª—ã–º —Å–æ–±—ã—Ç–∏–µ–º –≤ –Ω–∞—à–µ–π –∂–∏–∑–Ω–∏ ‚Äî –¥–Ω—ë–º, –∫–æ–≥–¥–∞ –º—ã —Å—Ç–∞–Ω–µ–º —Å–µ–º—å—ë–π.
      –í —ç—Ç–æ—Ç –æ—Å–æ–±–µ–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç –Ω–∞–º —Ö–æ—á–µ—Ç—Å—è –≤–∏–¥–µ—Ç—å —Ä—è–¥–æ–º —Ç–µ—Ö, –∫—Ç–æ –¥–æ—Ä–æ–≥ –Ω–∞—à–µ–º—É —Å–µ—Ä–¥—Ü—É,
      –∫—Ç–æ —Ä–∞–∑–¥–µ–ª—è–µ—Ç —Å –Ω–∞–º–∏ —Ä–∞–¥–æ—Å—Ç—å, —É–ª—ã–±–∫–∏ –∏ –∏—Å–∫—Ä–µ–Ω–Ω–∏–µ —ç–º–æ—Ü–∏–∏.
      </p>

      <p>
      –ü—Ä–∏–≥–ª–∞—à–∞–µ–º –≤–∞—Å –ø—Ä–æ–≤–µ—Å—Ç–∏ —ç—Ç–æ—Ç –¥–µ–Ω—å –≤–º–µ—Å—Ç–µ —Å –Ω–∞–º–∏, –Ω–∞–ø–æ–ª–Ω–∏—Ç—å –µ–≥–æ —Å–º–µ—Ö–æ–º, –æ–±—ä—è—Ç–∏—è–º–∏,
      –¥–æ–±—Ä—ã–º–∏ —Å–ª–æ–≤–∞–º–∏ –∏ –Ω–µ–∑–∞–±—ã–≤–∞–µ–º—ã–º–∏ –≤–æ—Å–ø–æ–º–∏–Ω–∞–Ω–∏—è–º–∏.
      –í–∞—à–µ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤–∏–µ ‚Äî —Å–∞–º—ã–π —Ü–µ–Ω–Ω—ã–π –ø–æ–¥–∞—Ä–æ–∫ –¥–ª—è –Ω–∞—Å.
      </p>

      <p>
      –ú—ã –ø–æ–Ω–∏–º–∞–µ–º, —á—Ç–æ –¥–∞—Ä–∏—Ç—å —Ü–≤–µ—Ç—ã –Ω–∞ —Å–≤–∞–¥—å–±—É ‚Äî —ç—Ç–æ —Ç—Ä–∞–¥–∏—Ü–∏—è, –Ω–æ –º—ã –Ω–µ —Å–º–æ–∂–µ–º –Ω–∞—Å–ª–∞–¥–∏—Ç—å—Å—è –∏—Ö –∫—Ä–∞—Å–æ—Ç–æ–π –≤ –ø–æ–ª–Ω–æ–π –º–µ—Ä–µ‚Ä¶
      –ë—É–¥–µ–º —Ä–∞–¥—ã –ª—é–±–æ–º—É –ø–æ–¥–∞—Ä–∫—É. –ò –Ω–µ –≤–∞–∂–Ω–æ, –≤ –∫–∞–∫–æ–π –∫–æ–Ω–≤–µ—Ä—Ç –≤—ã –µ–≥–æ —É–ø–∞–∫—É–µ—Ç–µ.
      </p>

      <p>
      –ë—É–¥–µ–º –±–ª–∞–≥–æ–¥–∞—Ä–Ω—ã, –µ—Å–ª–∏ –≤—ã –≤–æ–∑–¥–µ—Ä–∂–∏—Ç–µ—Å—å –æ—Ç –∫—Ä–∏–∫–æ–≤ ¬´–ì–æ—Ä—å–∫–æ¬ª –Ω–∞ –ø—Ä–∞–∑–¥–Ω–∏–∫–µ,
      –≤–µ–¥—å –ø–æ—Ü–µ–ª—É–π ‚Äî —ç—Ç–æ –∑–Ω–∞–∫ –≤—ã—Ä–∞–∂–µ–Ω–∏—è —á—É–≤—Å—Ç–≤, –æ–Ω –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–æ –∑–∞–∫–∞–∑—É.
      </p>

      <h1>
      –ë—É–¥–µ–º —Å –Ω–µ—Ç–µ—Ä–ø–µ–Ω–∏–µ–º –∂–¥–∞—Ç—å –≤–∞—Å 23 –º–∞—è –≤ 18:00 –ø–æ –∞–¥—Ä–µ—Å—É –≥.–†–æ—Å—Ç–æ–≤-–Ω–∞-–î–æ–Ω—É, —É–ª. –õ–µ–≤–æ–±–µ—Ä–µ–∂–Ω–∞—è 50, —Ä–µ—Å—Ç–æ—Ä–∞–Ω "–ñ–∞—Ä–¥–∏–Ω".
      </h1>
    </div>

    <h2>–î—Ä–µ—Å—Å-–∫–æ–¥</h2>
    <p>–ù–µ–∂–Ω–æ-–≥–æ–ª—É–±—ã–µ, –±–µ–ª—ã–µ –∏ –ø–∞—Å—Ç–µ–ª—å–Ω—ã–µ –æ—Ç—Ç–µ–Ω–∫–∏</p>

    <h2>–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤–∏–µ</h2>

    <input id="name" placeholder="–í–∞—à–µ –∏–º—è"/>
    <input id="count" type="number" value="1" min="1" placeholder="–°–∫–æ–ª—å–∫–æ —á–µ–ª–æ–≤–µ–∫"/>

    <div class="buttons">
      <button class="yes" onclick="saveAnswer('–î–∞')">–î–∞</button>
      <button class="no" onclick="saveAnswer('–ù–µ—Ç')">–ù–µ—Ç</button>
    </div>

    <button class="musicBtn" onclick="toggleMusic()">–ú—É–∑—ã–∫–∞ –≤–∫–ª/–≤—ã–∫–ª</button>
    <button class="download" onclick="downloadCSV()">–°–∫–∞—á–∞—Ç—å –æ—Ç–≤–µ—Ç—ã (Excel)</button>

  </div>
</div>

<audio id="music" loop>
  <source src="music.mp3" type="audio/mpeg">
</audio>

<script>
function openInvite(){
  start.classList.add("hidden");
  invite.classList.remove("hidden");
  music.play().catch(()=>{});
}

/* –º—É–∑—ã–∫–∞ */
function toggleMusic(){
  if(music.paused) music.play();
  else music.pause();
}

/* —Ç–∞–π–º–µ—Ä */
const wedding = new Date("2026-05-23T15:00:00");

setInterval(()=>{
  const diff = wedding - new Date();
  const d = Math.floor(diff/86400000);
  const h = Math.floor(diff/3600000)%24;
  const m = Math.floor(diff/60000)%60;

  timer.textContent = `–î–æ —Å–≤–∞–¥—å–±—ã: ${d} –¥ ${h} —á ${m} –º–∏–Ω`;
},1000);

/* —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç–æ–≤ */
function saveAnswer(answer){
  const nameVal = name.value || "–ë–µ–∑ –∏–º–µ–Ω–∏";
  const countVal = count.value || 1;

  const list = JSON.parse(localStorage.getItem("wedding")) || [];

  list.push({
    name:nameVal,
    guests:countVal,
    answer:answer,
    time:new Date().toLocaleString("ru-RU")
  });

  localStorage.setItem("wedding", JSON.stringify(list));
  alert("–°–ø–∞—Å–∏–±–æ –∑–∞ –æ—Ç–≤–µ—Ç ‚ù§Ô∏è");
}

/* —ç–∫—Å–ø–æ—Ä—Ç Excel (UTF-8 + BOM + —Å—Ç–æ–ª–±—Ü—ã) */
function downloadCSV(){
  const data = JSON.parse(localStorage.getItem("wedding")) || [];

  const rows = [
    ["–ò–º—è","–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –≥–æ—Å—Ç–µ–π","–û—Ç–≤–µ—Ç","–í—Ä–µ–º—è"]
  ];

  data.forEach(r=>{
    rows.push([r.name, r.guests, r.answer, r.time]);
  });

  const csv = rows.map(r => r.join(";")).join("\n");
  const BOM = "\uFEFF";

  const blob = new Blob([BOM + csv], {
    type:"text/csv;charset=utf-8;"
  });

  const a = document.createElement("a");
  a.href = URL.createObjectURL(blob);
  a.download = "answers.csv";
  a.click();
}

/* –ª–µ–ø–µ—Å—Ç–∫–∏ */
const canvas = document.getElementById("petals");
const ctx = canvas.getContext("2d");

canvas.width = innerWidth;
canvas.height = innerHeight;

let petals = [];

for(let i=0;i<40;i++){
  petals.push({
    x:Math.random()*innerWidth,
    y:Math.random()*innerHeight,
    speed:Math.random()*1+0.5
  });
}

function draw(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  ctx.fillStyle="#ffdbe8";

  petals.forEach(p=>{
    ctx.beginPath();
    ctx.arc(p.x,p.y,5,0,6.28);
    ctx.fill();
    p.y += p.speed;
    if(p.y > innerHeight) p.y = 0;
  });

  requestAnimationFrame(draw);
}

draw();
</script>

</body>
</html>

